{% extends "layout.html.twig" %}
{% set page_title = "Flash Card Categories" %}
{% block main %}
    {% include "blocks/admin/cards/menu.html.twig" %}
    <div class="page-header">
        <h3>
            Manage Flash Cards
            <span class="text-muted small pull-right">
                Viewing {{ n_cats|number_format }} flash card categories.
            </span>
        </h3>
    </div>
    <div class="row">
        <div class="col-md-12">
            {% if pagination %}
                <div class="text-center">
                    {{ pagination|raw }}
                </div>
            {% endif %}
        </div>
        <div class="col-md-12">
            <div class="table-responsive">
                <table class="table table-striped table-hover" id="card-cats-table">
                    <thead>
                    <tr>
                        <th class="col-md-1">{{ sortlink('categoryType','Type',sort)|raw }}</th>
                        <th class="col-md-3">{{ sortlink('categoryName','Category Name',sort)|raw }}</th>
                        <th class="col-md-3">{{ sortlink('categoryCreatedBy','Created By',sort)|raw }}</th>
                        <th class="col-md-2">{{ sortlink('categoryComments','Comments',sort)|raw }}</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for cat in cats %}
                        <tr data-uuid="{{ cat.uuid }}"
                            class="cursor-pointer">
                            <td>
                                {% include "blocks/admin/cards/category-type-icon.html.twig" %}
                            </td>
                            <td title="{{ cat.name }}">{{ cat.name|strtr(30) }}</td>
                            <td>{% if users[cat.createdBy] %}{{ users[cat.createdBy].name }}{% else %}UNKNOWN{% endif %}</td>
                            <td title="{{ cat.comments }}">{{ cat.comments|strtr(20) }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                {% set tableSelector = "#card-cats-table" %}
                {% set redirectPath = "/admin/cards" %}
                {% include "utilities/table-row-link.html.twig" %}
            </div>
            {% if pagination %}
                <div class="text-center">
                    {{ pagination|raw }}
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}